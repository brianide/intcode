<project name="Intcode VM" default="test">

<target name="clean">
    <delete file="intcode"/>
</target>

<target name="compile">
    <exec executable="clang" failonerror="true">
        <arg line="-o intcode"/>
        <arg line="--std=gnu17"/>
        <arg line="-fsanitize=address"/>
        <arg line="src/main.c src/assocarray.c src/chunkmem.c src/vm.c src/linkedqueue.c src/day2.c src/day5.c"/>
    </exec>
</target>

<target name="test" depends="compile">
    <exec executable="./intcode">
    </exec>
</target>

</project>